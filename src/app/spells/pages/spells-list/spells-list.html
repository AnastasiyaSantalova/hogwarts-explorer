<div class="spells-list-header-container">
  <app-page-header name="ðŸ”® Spells"></app-page-header>
  <div class="spells-list-filters">
    <!-- Name input -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Search</mat-label>
      <input
        matInput
        [formControl]="nameFilter"
        placeholder="e.g. Expelliarmus"
      />
    </mat-form-field>

    <!-- Type multi-select -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Type</mat-label>
      <mat-select [formControl]="typeFilter" multiple>
        <mat-option *ngFor="let type of uniqueTypes" [value]="type"
          >{{ type }}</mat-option
        >
      </mat-select>
    </mat-form-field>

    <!-- Light multi-select -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Light</mat-label>
      <mat-select [formControl]="lightFilter" multiple>
        <mat-option *ngFor="let light of uniqueLights" [value]="light"
          >{{ light }}</mat-option
        >
      </mat-select>
    </mat-form-field>

    <!-- canBeVerbal -->
    <mat-checkbox [formControl]="canBeVerbalFilter" class="w-full"
      >Can Be Verbal</mat-checkbox
    >
  </div>
</div>

<!-- Loading state -->
<app-loader *ngIf="isLoading"></app-loader>

<!-- Error state -->
<app-error-message
  *ngIf="error"
  [retryCallback]="retryLoadSpells.bind(this)"
></app-error-message>

<!-- Content state -->
<div *ngIf="!isLoading && !error" class="content-container">
  <ng-container *ngIf="filteredSpells$ | async as spells">
    <div *ngIf="spells.length > 0; else noSpells" class="spells-list">
      <app-spell-card
        *ngFor="let spell of spells"
        [spell]="spell"
      ></app-spell-card>
    </div>
  </ng-container>

  <!-- Loading more indicator -->
  <div *ngIf="isLoadingMore && hasMoreSpells" class="loading-more">
    <p>Loading more spells...</p>
  </div>
</div>

<!-- No spells template -->
<ng-template #noSpells>
  <div class="no-spells-container">
    <p>No spells found matching your criteria.</p>
  </div>
</ng-template>
